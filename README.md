ä¸‹é¢ç»™ä½ ä¸¤ä»½**å¯ç›´æ¥ç²˜è´´**åˆ°ä»“åº“çš„ Markdownï¼šå…ˆè‹±æ–‡ç‰ˆï¼Œå†ä¸­æ–‡ç‰ˆã€‚å„è‡ªéƒ½æ˜¯**å®Œæ•´ README**ã€‚

---

# StudySphere

## Overview

StudySphere is a full-stack learning/forum application. **Backend:** Spring Boot + MyBatis-Plus + Redis + JWT + RabbitMQ + MinIO. **Frontend:** Vue 3 + Element Plus. It ships with auth (register/login/reset), verification codes, request tracing, rate limiting, and OpenAPI docs.

## âœ¨ Features

### Backend

* **Auth basics**: user registration, login, password reset (REST APIs)
* **MyBatis-Plus** for simpler persistence and CRUD
* **Redis** stores verification codes (register/reset) with TTL
* **RabbitMQ** queues email/message tasks, processed by a listener
* **Spring Security + JWT**: manual integration for authentication/authorization
* **IP rate limiting** via Redis to prevent abuse
* **DTO â†” DO separation** with reflection-based mapping utilities
* **Unified JSON error model** for all errors/exceptions
* **Manual CORS** via a filter
* **Snowflake trace ID** auto-generated per request (filter)
* **Environment profiles**: separate dev/prod configuration
* **Structured logging**: full request info + trace ID, supports file logs
* **Swagger/OpenAPI** auto-generated docs, including auth endpoints
* **MinIO** for object storage (e.g., image uploads)

### Frontend

* **Auth UIs**: register, login, password reset + a simple home page
* **Vue Router** for routing
* **Axios** for HTTP requests
* **Element Plus** as the UI component library
* **VueUse** for dark-mode toggle
* **unplugin-auto-import** to reduce bundle size with on-demand imports

## ğŸ§± Tech Stack

**Backend:** Spring Boot 3, Spring Security, JWT, MyBatis-Plus, Redis, RabbitMQ, MinIO, Springdoc OpenAPI
**Frontend:** Vue 3, Vite, Vue Router, Axios, Element Plus, VueUse, unplugin-auto-import

## ğŸ—‚ Project Structure

```
study-sphere/
â”œâ”€ backend/                # Spring Boot app
â”‚  â”œâ”€ src/main/java/...
â”‚  â”œâ”€ src/main/resources/
â”‚  â”‚  â”œâ”€ application.yml
â”‚  â”‚  â”œâ”€ application-dev.yml
â”‚  â”‚  â””â”€ application-prod.yml
â”‚  â””â”€ pom.xml
â””â”€ frontend/               # Vue 3 app
   â”œâ”€ src/
   â”œâ”€ index.html
   â”œâ”€ vite.config.ts
   â””â”€ package.json
```

## âš™ï¸ Prerequisites

* **Java 17+**, Maven 3.8+
* **Node.js 18+**, pnpm/npm/yarn
* **Services**: Redis, RabbitMQ, MinIO

## ğŸ³ Quick Start (Dependencies via Docker)

Create a `docker-compose.yml` and run the services:

```yaml
version: "3.9"
services:
  redis:
    image: redis:7
    ports: [ "6379:6379" ]

  rabbitmq:
    image: rabbitmq:3-management
    ports: [ "5672:5672", "15672:15672" ]
    environment:
      RABBITMQ_DEFAULT_USER: admin
      RABBITMQ_DEFAULT_PASS: admin

  minio:
    image: minio/minio:latest
    command: server /data --console-address ":9001"
    ports: [ "9000:9000", "9001:9001" ]
    environment:
      MINIO_ROOT_USER: minioadmin
      MINIO_ROOT_PASSWORD: minioadmin
    volumes:
      - ./data/minio:/data
```

Run:

```bash
docker compose up -d
# MinIO console â†’ http://localhost:9001  (user/pass: minioadmin / minioadmin)
```

## ğŸ” Configuration

### Backend (`application.yml`)

```yaml
spring:
  profiles:
    active: dev

app:
  jwt:
    secret: "CHANGE_ME_32+_CHARS"
    expire-hours: 72

  cors:
    allowed-origins: "http://localhost:5173"

  trace:
    header: "X-Trace-Id"

  minio:
    endpoint: "http://localhost:9000"
    bucket: "studysphere"
    access-key: "minioadmin"
    secret-key: "minioadmin"

  rate-limit:
    window-seconds: 60
    max-requests: 100

springdoc:
  api-docs:
    enabled: true
  swagger-ui:
    enabled: true

spring:
  data:
    redis:
      host: localhost
      port: 6379
  rabbitmq:
    host: localhost
    port: 5672
    username: admin
    password: admin
```

### Frontend (`.env.local`)

```dotenv
VITE_API_BASE_URL=http://localhost:8080
VITE_UPLOAD_BUCKET=studysphere
```

## ğŸš€ Run

### Backend

```bash
cd backend
mvn clean package -DskipTests
java -jar target/*.jar
```

* Swagger UI â†’ `http://localhost:8080/swagger-ui/index.html`
* OpenAPI JSON â†’ `http://localhost:8080/v3/api-docs`

### Frontend

```bash
cd frontend
pnpm i    # or npm i / yarn
pnpm dev  # or npm run dev / yarn dev
# App â†’ http://localhost:5173
```

## ğŸ“š Common API Endpoints

* `POST /api/auth/register` â€” send code + register
* `POST /api/auth/login` â€” issue JWT
* `POST /api/auth/reset/request` â€” request reset code
* `POST /api/auth/reset/confirm` â€” confirm reset
* `GET /api/user/profile` â€” requires `Authorization: Bearer <token>`
* `POST /api/topic` â€” create topic (JWT)

**Headers:**

* `Authorization: Bearer <JWT>`
* `X-Trace-Id` (auto-generated by filter if missing)

## ğŸ§© Implementation Notes

* Verification codes in Redis as `reg:{email}` / `reset:{email}` with TTL
* RabbitMQ decouples email/message sending; a listener consumes and sends
* Spring Security guards routes; JWT filter validates and injects user
* Redis sliding-window IP rate limit
* Reflection-based DTO/DO mapper utilities
* Unified JSON error schema: `{ code, message, traceId, path, timestamp }`
* Snowflake ID added to MDC logs and response header

## ğŸ›¡ Security & Production Tips

* Use a strong JWT secret and rotate periodically
* Configure per-environment CORS allow-lists
* Persist MinIO data to durable storage
* Add HTTPS and a reverse proxy (e.g., Nginx)
* Tune rate limits for your traffic
* Centralize logs (ELK/OpenSearch) with trace IDs

## ğŸ“œ License

MIT (or your choice)

---
